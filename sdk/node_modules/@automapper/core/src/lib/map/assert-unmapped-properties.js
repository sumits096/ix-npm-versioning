"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.assertUnmappedProperties = void 0;
/**
 * Depends on implementation of plugin.initializeMapping
 */
function assertUnmappedProperties(destination, configuredKeys, sourceKey, destinationKey, errorHandler) {
    var _a, _b;
    const unmappedKeys = Object.entries(destination).reduce((result, [destinationKey, destinationValue]) => {
        const isAlreadyConfigured = configuredKeys.some((configuredKey) => configuredKey === destinationKey);
        const isWritable = Object.getOwnPropertyDescriptor(destination, destinationKey)
            .writable === true;
        if (!isAlreadyConfigured &&
            isWritable &&
            destinationValue === undefined) {
            result.push(destinationKey);
        }
        return result;
    }, []);
    if (unmappedKeys.length) {
        const parentInfo = `${(_a = sourceKey['name']) !== null && _a !== void 0 ? _a : sourceKey} -> ${(_b = destinationKey['name']) !== null && _b !== void 0 ? _b : destinationKey}`;
        errorHandler.handle(`
Unmapped properties for ${parentInfo}:
-------------------
${unmappedKeys.join(',\n')}
`);
    }
}
exports.assertUnmappedProperties = assertUnmappedProperties;
//# sourceMappingURL=assert-unmapped-properties.js.map