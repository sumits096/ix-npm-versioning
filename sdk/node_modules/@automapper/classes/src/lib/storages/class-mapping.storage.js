"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ClassMappingStorage = void 0;
/**
 * Internal ClassMappingStorage
 *
 * This is to store the Mapping when created with Constructibles
 * Not test due to private
 *
 * @private
 */
class ClassMappingStorage {
    constructor() {
        this.storage = new WeakMap();
    }
    get(source, destination) {
        const sourceVal = this.storage.get(source);
        return sourceVal ? sourceVal.get(destination) : undefined;
    }
    set(source, destination, mapping) {
        if (!this.storage.has(source)) {
            this.storage.set(source, new WeakMap().set(destination, mapping));
            return;
        }
        if (!this.has(source, destination)) {
            this.storage.get(source).set(destination, mapping);
        }
    }
    has(source, destination) {
        const sourceVal = this.storage.get(source);
        return sourceVal ? sourceVal.has(destination) : false;
    }
    dispose() {
        this.storage = new WeakMap();
    }
}
exports.ClassMappingStorage = ClassMappingStorage;
//# sourceMappingURL=class-mapping.storage.js.map