"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.before = void 0;
const tslib_1 = require("tslib");
const model_visitor_1 = require("./lib/model-visitor");
const plugin_utils_1 = require("./lib/plugin-utils");
const defaultOptions = {
    modelFileNameSuffix: ['.model.ts', '.dto.ts', '.vm.ts'],
};
function automapperTransformerPlugin(program, options = {}) {
    options = Object.assign(Object.assign({}, defaultOptions), options);
    return {
        before(context) {
            model_visitor_1.ModelVisitor.reset();
            return (sourceFile) => {
                if ((0, plugin_utils_1.isFilenameMatched)(options.modelFileNameSuffix || [], sourceFile.fileName)) {
                    return model_visitor_1.ModelVisitor.visit(sourceFile, context, program);
                }
                return sourceFile;
            };
        },
    };
}
exports.default = automapperTransformerPlugin;
const before = (options, program) => automapperTransformerPlugin(program, options).before;
exports.before = before;
(0, tslib_1.__exportStar)(require("./lib/constants"), exports);
(0, tslib_1.__exportStar)(require("./lib/interfaces"), exports);
//# sourceMappingURL=index.js.map