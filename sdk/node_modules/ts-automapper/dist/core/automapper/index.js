"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var automapper_utils_1 = require("./automapper.utils");
/**
  AutoMapper static class to be able to create mapping definitions.
  @class AutoMapper
*/
var AutoMapper = /** @class */ (function () {
    function AutoMapper() {
    }
    AutoMapper.mappings = [];
    /**
     * Create a mapping definition with an unique key.
     *
     * ```ts
     * import AutoMapper from "ts-automapper";
     * import { ISource, IDestination } = "../path/of/your/interfaces.ts";
     *
     * AutoMapper.create<ISource, IDestination>('UNIQUE_KEY');
     * ```
     *
     * @param {string} key The unique key to be able to retrieve the mapping.
     * @return {Mapping<TSource, TDestination>} Returns the mapping class.
     */
    AutoMapper.create = function (key) {
        var mapping = automapper_utils_1.instantiateMapping(key);
        AutoMapper.mappings.push(mapping);
        return mapping;
    };
    /**
     * Execute a mapping by its key
     *
     * ```ts
     * import AutoMapper from "ts-automapper";
     * import { ISource, IDestination } = "../path/of/your/interfaces.ts";
     *
     * const input: ISource = {};
     * const output:IDestination = AutoMapper.exec('UNIQUE_KEY', input);
     * ```
     *
     * @param key The unique key to be able to retrieve the mapping.
     * @param source The TSource object
     * @returns The final object
     */
    AutoMapper.exec = function (key, source) {
        var currentMapping = AutoMapper.mappings.find(function (mapping) { return mapping.key === key; });
        if (!currentMapping) {
            throw new Error("Mapping configuration was not found for '" + key + "'");
        }
        return currentMapping.exec(source);
    };
    /**
     * Clear the list of mappings.
     *
     * ```ts
     * import AutoMapper from "ts-automapper";
     *
     * AutoMapper.clear();
     * ```
     */
    AutoMapper.clear = function () {
        AutoMapper.mappings = [];
    };
    return AutoMapper;
}());
exports.default = AutoMapper;
//# sourceMappingURL=index.js.map